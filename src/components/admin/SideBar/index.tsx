'use client'

import React from 'react'
// import { usePathname } from 'next/navigation'
import Link from 'next/link'
import Image from 'next/image'
import useLocalStorage from '../hooks/useLocalStorage'
import SidebarItem from './SidebarItem'
import ClickOutside from '../ClickOutside'
import logo from '/public/images/user/home/logo.svg'

interface SidebarProps {
  sidebarOpen: boolean
  setSidebarOpen: (arg: boolean) => void
}

const menuGroups = [
  {
    menuItems: [
      {
        icon: (
          <svg
            width="34"
            height="24"
            viewBox="0 0 28 28"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              // fill-rule="evenodd"
              // clip-rule="evenodd"
              d="M1.18854 8.65208C0.460356 10.171 0.715975 11.9475 1.22721 15.5005L1.6028 18.1107C2.25952 22.6747 2.58787 24.9567 4.17108 26.32C5.75428 27.6832 8.07611 27.6832 12.7198 27.6832H15.7003C20.3439 27.6832 22.6658 27.6832 24.249 26.32C25.8322 24.9567 26.1605 22.6747 26.8172 18.1107L27.1928 15.5005C27.7041 11.9475 27.9597 10.171 27.2315 8.65208C26.5033 7.13317 24.9534 6.2099 21.8536 4.36334L19.9877 3.25187C17.1727 1.575 15.7653 0.736572 14.21 0.736572C12.6548 0.736572 11.2473 1.575 8.43232 3.25187L6.56648 4.36334C3.46664 6.2099 1.91672 7.13317 1.18854 8.65208ZM14.21 23.3044C13.6519 23.3044 13.1995 22.852 13.1995 22.2939V18.2519C13.1995 17.6938 13.6519 17.2414 14.21 17.2414C14.7681 17.2414 15.2205 17.6938 15.2205 18.2519V22.2939C15.2205 22.852 14.7681 23.3044 14.21 23.3044Z"
              fill="#266CA8"
            />
          </svg>
        ),
        label: 'Dashboard',
        route: '/admin/dashboard',
      },
      {
        icon: (
          <svg
            width="34"
            height="30"
            viewBox="0 0 40 41"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M24.6667 14.4198C24.6667 16.9972 22.5773 19.0865 20 19.0865C17.4227 19.0865 15.3333 16.9972 15.3333 14.4198C15.3333 11.8425 17.4227 9.75317 20 9.75317C22.5773 9.75317 24.6667 11.8425 24.6667 14.4198Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M28 26.4198C28 28.9972 24.4183 31.0865 20 31.0865C15.5817 31.0865 12 28.9972 12 26.4198C12 23.8425 15.5817 21.7532 20 21.7532C24.4183 21.7532 28 23.8425 28 26.4198Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M13.4961 11.0867C13.7327 11.0867 13.9637 11.1099 14.1867 11.1541C13.6433 12.1193 13.3333 13.2334 13.3333 14.42C13.3333 15.5777 13.6284 16.6664 14.1475 17.6152C13.9366 17.6544 13.7188 17.675 13.4961 17.675C11.6102 17.675 10.0814 16.2002 10.0814 14.3808C10.0814 12.5615 11.6102 11.0867 13.4961 11.0867Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M11.2631 29.7346C10.5059 28.8294 10 27.7187 10 26.42C10 25.161 10.4754 24.0787 11.1944 23.189C8.6548 23.386 6.66667 24.7749 6.66667 26.4592C6.66667 28.1592 8.68974 29.5584 11.2631 29.7346Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M26.6666 14.42C26.6666 15.5777 26.3715 16.6664 25.8524 17.6152C26.0633 17.6544 26.2811 17.675 26.5038 17.675C28.3897 17.675 29.9185 16.2002 29.9185 14.3808C29.9185 12.5615 28.3897 11.0867 26.5038 11.0867C26.2672 11.0867 26.0362 11.1099 25.8131 11.1541C26.3566 12.1193 26.6666 13.2334 26.6666 14.42Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M28.7368 29.7346C31.3101 29.5584 33.3332 28.1592 33.3332 26.4592C33.3332 24.7749 31.3451 23.386 28.8055 23.189C29.5245 24.0787 29.9999 25.161 29.9999 26.42C29.9999 27.7187 29.494 28.8294 28.7368 29.7346Z"
              fill="black"
              fillOpacity="0.4"
            />
          </svg>
        ),
        label: 'All Users',
        route: '/admin/allusers',
      },
      {
        icon: (
          <svg
            width="34"
            height="30"
            viewBox="0 0 40 40"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.57539 12.5325C6.57539 9.92229 6.57539 8.61716 7.44204 7.80626C8.30869 6.99536 9.70355 6.99536 12.4933 6.99536C15.283 6.99536 16.6778 6.99536 17.5445 7.80626C18.4111 8.61716 18.4111 9.92229 18.4111 12.5325V27.7598C18.4111 30.37 18.4111 31.6751 17.5445 32.486C16.6778 33.2969 15.283 33.2969 12.4933 33.2969C9.70355 33.2969 8.30869 33.2969 7.44204 32.486C6.57539 31.6751 6.57539 30.37 6.57539 27.7598V12.5325Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M21.0413 24.6174C21.0413 21.8897 21.0413 20.5258 21.9079 19.6784C22.7746 18.8311 24.1694 18.8311 26.9591 18.8311C29.7488 18.8311 31.1437 18.8311 32.0103 19.6784C32.877 20.5258 32.877 21.8897 32.877 24.6174V27.5106C32.877 30.2383 32.877 31.6021 32.0103 32.4495C31.1437 33.2969 29.7488 33.2969 26.9591 33.2969C24.1694 33.2969 22.7746 33.2969 21.9079 32.4495C21.0413 31.6021 21.0413 30.2383 21.0413 27.5106V24.6174Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M21.0413 11.5981C21.0413 10.1684 21.0413 9.45351 21.2665 8.88961C21.5668 8.13774 22.1428 7.54037 22.8679 7.22894C23.4116 6.99536 24.101 6.99536 25.4797 6.99536H28.4386C29.8173 6.99536 30.5066 6.99536 31.0504 7.22894C31.7754 7.54037 32.3514 8.13774 32.6517 8.88961C32.877 9.45351 32.877 10.1684 32.877 11.5981C32.877 13.0279 32.877 13.7428 32.6517 14.3067C32.3514 15.0585 31.7754 15.6559 31.0504 15.9673C30.5066 16.2009 29.8173 16.2009 28.4386 16.2009H25.4797C24.101 16.2009 23.4116 16.2009 22.8679 15.9673C22.1428 15.6559 21.5668 15.0585 21.2665 14.3067C21.0413 13.7428 21.0413 13.0279 21.0413 11.5981Z"
              fill="black"
              fillOpacity="0.4"
            />
          </svg>
        ),
        label: 'Payment Details',
        route: '/payment',
      },
      {
        icon: (
          <svg
            width="34"
            height="24"
            viewBox="0 0 26 27"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M13.738 19.8804C13.5486 20.0876 13.2808 20.2056 13 20.2056C12.7192 20.2056 12.4514 20.0876 12.262 19.8804L6.92864 14.0471C6.55597 13.6395 6.5843 13.007 6.9919 12.6343C7.3995 12.2616 8.03203 12.2899 8.4047 12.6975L12 16.6299V1.87231C12 1.32003 12.4477 0.872314 13 0.872314C13.5523 0.872314 14 1.32003 14 1.87231V16.6299L17.5953 12.6975C17.968 12.2899 18.6005 12.2616 19.0081 12.6343C19.4157 13.007 19.444 13.6395 19.0714 14.0471L13.738 19.8804Z"
              fill="black"
              fillOpacity="0.4"
            />
            <path
              d="M2 17.8723C2 17.32 1.55229 16.8723 1 16.8723C0.447717 16.8723 7.06692e-07 17.32 7.06692e-07 17.8723V17.9455C-2.62347e-05 19.7689 -4.79519e-05 21.2387 0.155366 22.3946C0.316721 23.5948 0.661913 24.6053 1.46447 25.4078C2.26702 26.2104 3.27752 26.5556 4.47767 26.7169C5.63363 26.8724 7.10339 26.8723 8.92684 26.8723H17.0732C18.8966 26.8723 20.3664 26.8724 21.5223 26.7169C22.7225 26.5556 23.733 26.2104 24.5355 25.4078C25.3381 24.6053 25.6833 23.5948 25.8446 22.3946C26.0001 21.2387 26 19.7689 26 17.9455V17.8723C26 17.32 25.5523 16.8723 25 16.8723C24.4477 16.8723 24 17.32 24 17.8723C24 19.7862 23.9979 21.121 23.8625 22.1282C23.7309 23.1065 23.4903 23.6246 23.1213 23.9936C22.7523 24.3627 22.2342 24.6032 21.2558 24.7348C20.2487 24.8702 18.9139 24.8723 17 24.8723H9C7.08611 24.8723 5.7513 24.8702 4.74416 24.7348C3.7658 24.6032 3.2477 24.3627 2.87868 23.9936C2.50966 23.6246 2.26907 23.1065 2.13753 22.1282C2.00213 21.121 2 19.7862 2 17.8723Z"
              fill="black"
              fillOpacity="0.4"
            />
          </svg>
        ),
        label: 'DXF Downloads',
        route: '/downloads',
      },
      {
        icon: (
          <svg
            width="36"
            height="24"
            viewBox="0 0 28 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M16.6667 0.205566H11.3333C6.30502 0.205566 3.79086 0.205566 2.22877 1.76766C1.10404 2.89238 0.78913 4.51066 0.700957 7.20557H27.299C27.2109 4.51066 26.896 2.89238 25.7712 1.76766C24.2091 0.205566 21.695 0.205566 16.6667 0.205566Z"
              fill="#939393"
            />
            <path
              d="M11.3333 21.5389H16.6667C21.695 21.5389 24.2091 21.5389 25.7712 19.9768C27.3333 18.4147 27.3333 15.9005 27.3333 10.8722C27.3333 10.283 27.3333 9.72827 27.3308 9.20557H0.669182C0.666668 9.72827 0.666668 10.283 0.666668 10.8722C0.666668 15.9005 0.666668 18.4147 2.22877 19.9768C3.79086 21.5389 6.30502 21.5389 11.3333 21.5389Z"
              fill="#939393"
            />
            <path
              // fill-rule="evenodd"
              // clip-rule="evenodd"
              d="M5 16.2056C5 15.6533 5.44772 15.2056 6 15.2056H11.3333C11.8856 15.2056 12.3333 15.6533 12.3333 16.2056C12.3333 16.7579 11.8856 17.2056 11.3333 17.2056H6C5.44772 17.2056 5 16.7579 5 16.2056Z"
              fill="white"
            />
            <path
              // fill-rule="evenodd"
              // clip-rule="evenodd"
              d="M13.6667 16.2056C13.6667 15.6533 14.1144 15.2056 14.6667 15.2056H16.6667C17.219 15.2056 17.6667 15.6533 17.6667 16.2056C17.6667 16.7579 17.219 17.2056 16.6667 17.2056H14.6667C14.1144 17.2056 13.6667 16.7579 13.6667 16.2056Z"
              fill="white"
            />
          </svg>
        ),
        label: 'Subscriptions',
        route: '/subscriptions',
      },
    ],
  },
]

const Sidebar = ({ sidebarOpen, setSidebarOpen }: SidebarProps) => {
  // const pathname = usePathname()
  const [pageName, setPageName] = useLocalStorage('selectedMenu', 'dashboard')

  return (
    <ClickOutside onClick={() => setSidebarOpen(false)}>
      <aside
        className={`fixed left-0 top-0 flex h-screen w-72.5 flex-col overflow-y-hidden bg-[#F5F5F5] duration-300 ease-linear lg:translate-x-0 ${
          sidebarOpen ? 'translate-x-0' : '-translate-x-full'
        }`}
      >
        {/* <!-- SIDEBAR HEADER --> */}
        <div className="flex items-center justify-between gap-2 px-6 pt-5.5 lg:pt-6.5">
          <Link href="/">
            <Image width={176} height={32} src={logo} alt="Logo" priority />
          </Link>

          <button
            onClick={() => setSidebarOpen(!sidebarOpen)}
            aria-controls="sidebar"
            className="block lg:hidden"
          >
            <svg
              className="fill-current"
              width="20"
              height="18"
              viewBox="0 0 20 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19 8.175H2.98748L9.36248 1.6875C9.69998 1.35 9.69998 0.825 9.36248 0.4875C9.02498 0.15 8.49998 0.15 8.16248 0.4875L0.399976 8.3625C0.0624756 8.7 0.0624756 9.225 0.399976 9.5625L8.16248 17.4375C8.31248 17.5875 8.53748 17.7 8.76248 17.7C8.98748 17.7 9.17498 17.625 9.36248 17.475C9.69998 17.1375 9.69998 16.6125 9.36248 16.275L3.02498 9.8625H19C19.45 9.8625 19.825 9.4875 19.825 9.0375C19.825 8.55 19.45 8.175 19 8.175Z"
                fill=""
              />
            </svg>
          </button>
        </div>
        {/* <!-- SIDEBAR HEADER --> */}

        <div className="no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear">
          {/* <!-- Sidebar Menu --> */}
          <nav className="mt-5 px-4 py-4 lg:mt-9 lg:px-6">
            {menuGroups.map((group, groupIndex) => (
              <div key={groupIndex}>
                {/* <h3 className="mb-4 ml-4 text-sm font-semibold text-bodydark2">
                  {group.name}
                </h3> */}

                <ul className="mb-6 flex flex-col gap-1.5">
                  {group.menuItems.map((menuItem, menuIndex) => (
                    <SidebarItem
                      key={menuIndex}
                      item={menuItem}
                      pageName={pageName}
                      setPageName={setPageName}
                    />
                  ))}
                </ul>
              </div>
            ))}
          </nav>
          {/* <!-- Sidebar Menu --> */}
        </div>
      </aside>
    </ClickOutside>
  )
}

export default Sidebar
